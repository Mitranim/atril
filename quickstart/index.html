<!DOCTYPE html>
<html>
  <head>
    <title>atril</title>
    <meta name="author" content="Mitranim">
    <meta name="description" content="Experimental JS rendering library. Ideas from ReactJS, Polymer, Angular 2, Aurelia, made simple.">
    <meta charset="utf-8">
    <link rel="icon" href="data:;base64,=">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <base href="/atril/">
    <link rel="stylesheet" type="text/css" href="/atril/css/app.css">

    <!-- Block rendering while preparing the document -->
    
      <script src="build.js"></script>
    
  </head>

  <body>
    <div class="doc-banner">
  <h1 class="text-monospace size-initial">atril</h1>

  <h3>Experimental JS rendering library</h3>

  <p style="font-size: 1rem">Ideas from ReactJS, Polymer, Angular 2, Aurelia, made simple</p>

  <div class="link-section">
    <a href="https://github.com/Mitranim/atril" target="_blank">
      <sf-icon class="github-light pop"></sf-icon>
    </a>
    <a href="http://mitranim.com/#contacts" target="_blank">
      <sf-icon class="external-link pop" style="font-size: 0.8em"></sf-icon>
    </a>
    <!-- https://github.com/Mitranim/atril&text=Star&data.style=mega&data.icon=octicon-star&aria.label=Star -->
    <iframe allowtransparency="true" scrolling="no" frameborder="0" style="border: none" src="https://buttons.github.io/buttons.html#href%3Dhttps%3A%2F%2Fgithub.com%2FMitranim%2Fatril%26text%3DStar%26data.style%3Dmega%26data.icon%3Docticon-star%26aria.label%3DStar"></iframe>
  </div>
</div>

    <div class="flex" style="width: 100%; margin-top: 2rem">
      <div class="flex-5 order-1 space-out-v" style="padding: 0 1rem">
        <h2><span>Quickstart</span><a class="heading-anchor" autolink.="quickstart"><sf-icon class="inline link"></sf-icon></a></h2>
<p>The quickest way to get started is by using the source of <a href="https://github.com/Mitranim/atril" target="_blank">this very
site</a> as your demo project.</p>
<p>Clone and start it by running the following commands:</p>
<pre><code class="hljs lang-sh">git <span class="hljs-built_in">clone</span> https://github.com/Mitranim/atril.git atril-demo
<span class="hljs-built_in">cd</span> atril-demo
npm run install-all
npm start
</code></pre>
<p>This will the site and run it locally. It&#39;s a multi page app mostly rendered
with <code>atril</code>. Ruffle through <code>src-docs/app</code> to see how to add custom components.</p>
<p>The rest of this article assumes you have the app running, but we&#39;ll briefly
overview some setup basics.</p>
<h2><span>Quicklinks</span><a class="heading-anchor" autolink.="quicklinks"><sf-icon class="inline link"></sf-icon></a></h2>
<ul>
<li><a href="quickstart/#installation">Installation</a></li>
<li><a href="quickstart/#build">Build</a></li>
<li><a href="quickstart/#component">Component</a></li>
</ul>
<h2><span>Installation</span><a class="heading-anchor" autolink.="installation"><sf-icon class="inline link"></sf-icon></a></h2>
<p>Get it with <code>npm</code> or <a href="http://jspm.io" target="_blank"><code>jspm</code></a>.</p>
<pre><code class="hljs lang-sh">npm i --save atril
<span class="hljs-comment"># or</span>
jspm install npm:atril
<span class="hljs-comment"># or</span>
jspm install atril=github:Mitranim/atril
</code></pre>
<p>Or just grab the source from <a href="https://github.com/Mitranim/atril" target="_blank">GitHub</a>, and
don&#39;t forget to star the project. :)</p>
<p>Then import it in your application, using your module loader of choice
(SystemJS, RequireJS, browserify, webpack, etc.).</p>
<p>ES5 with CommonJS:</p>
<pre><code class="hljs lang-javascript"><span class="hljs-comment">// Import everything</span>
<span class="hljs-keyword">var</span> atril = <span class="hljs-built_in">require</span>(<span class="hljs-string">'atril'</span>);
<span class="hljs-comment">// Import piecemeal</span>
<span class="hljs-keyword">var</span> Component = <span class="hljs-built_in">require</span>(<span class="hljs-string">'atril'</span>).Component;
</code></pre>
<p>ES6 with SystemJS:</p>
<pre><code class="hljs lang-typescript"><span class="hljs-comment">// Import everything</span>
<span class="hljs-keyword">import</span> * as atril from <span class="hljs-string">'atril'</span>;
<span class="hljs-comment">// Import piecemeal</span>
<span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'atril'</span>;
</code></pre>
<h2><span>Build</span><a class="heading-anchor" autolink.="build"><sf-icon class="inline link"></sf-icon></a></h2>
<p>This is the typical folder structure for a project of this kind.</p>
<pre><code class="hljs lang-sh">dist ─── ...
src  ─┬─ app
      │   ├─ app.ts
      │   ├─ ...
      │   └─ my-component
      │              ├─ my-component.html
      ├─ html        └─ my-component.ts
      ├─ styles
      └─ ...
</code></pre>
<p>In development mode, you have a build system that continuously compiles scripts,
views, templates, styles and images, and outputs them into <code>dist</code>, from where
the application is served.</p>
<p>For production, you bundle scripts and views, minify all your files, output this
into <code>dist</code>, and deploy that folder. <code>.html</code> views are converted into <code>.js</code>
and included into the script bundle.</p>
<p>The documentation repo includes tasks and scripts for production builds. See
<code>package.json</code> and <code>gulpfile.js</code>.</p>
<h2><span>Component</span><a class="heading-anchor" autolink.="component"><sf-icon class="inline link"></sf-icon></a></h2>
<p>Let&#39;s make an obligatory todo demo — the &quot;hello world&quot; of custom elements.
Assuming you have the site running, create <code>src/html/todo.html</code> with the
following content:</p>
<pre><code class="hljs lang-html"><span class="hljs-comment">&lt;!-- src/html/<span class="hljs-doctag"><span class="hljs-keyword">todo</span>.</span>html --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">todo-list</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">todo-list</span>&gt;</span>
</code></pre>
<p>Navigate to this page in your browser.</p>
<p>Create <code>src/app/todo-list/</code> with the following:</p>
 <div class="code-pair"> 
<pre><code class="hljs lang-typescript"><span class="hljs-comment">// src/app/todo-list/todo-list.ts</span>

<span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'atril'</span>;

@Component({
  tagName: <span class="hljs-string">'todo-list'</span>
})
<span class="hljs-keyword">class</span> VM {
  text = <span class="hljs-string">''</span>;
  items = [
    {text: <span class="hljs-string">'Learn a new framework'</span>, completed: <span class="hljs-literal">true</span>},
    {text: <span class="hljs-string">'Be awesome'</span>}
  ];
  newItem = {text: <span class="hljs-string">''</span>, completed: <span class="hljs-literal">false</span>};

  add() {
    <span class="hljs-keyword">this</span>.items.unshift(<span class="hljs-keyword">this</span>.newItem);
    <span class="hljs-keyword">this</span>.newItem = {text: <span class="hljs-string">''</span>, completed: <span class="hljs-literal">false</span>};
  }

  remove(item) {
    <span class="hljs-keyword">this</span>.items.splice(<span class="hljs-keyword">this</span>.items.indexOf(item), <span class="hljs-number">1</span>);
  }

  static viewUrl = <span class="hljs-string">'todo-list/todo-list.html'</span>;
}
</code></pre>
<pre><code class="hljs lang-html"><span class="hljs-comment">&lt;!-- src/app/<span class="hljs-doctag"><span class="hljs-keyword">todo</span></span>-list/<span class="hljs-doctag"><span class="hljs-keyword">todo</span></span>-list.html --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">todo-item</span> <span class="hljs-attribute">bind.item</span>=<span class="hljs-value">"newItem"</span> <span class="hljs-attribute">bind.is-new</span>=<span class="hljs-value">"true"</span>
           <span class="hljs-attribute">on.add</span>=<span class="hljs-value">"add()"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">todo-item</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">todo-item</span> <span class="hljs-attribute">for.item.of</span>=<span class="hljs-value">"items"</span> <span class="hljs-attribute">bind.item</span>=<span class="hljs-value">"item"</span>
           <span class="hljs-attribute">on.remove</span>=<span class="hljs-value">"remove(item)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">todo-item</span>&gt;</span>
</code></pre>
 </div> 
 <sf-collapse class="info">
  <input id="quickstart-es5" type="checkbox">
  <label for="quickstart-es5" class="pad">
    <sf-icon svg-icon.="info-circle" class="inline text-info"></sf-icon>
    Click for ES5 version.
  </label> 
<pre><code class="hljs lang-javascript"><span class="hljs-keyword">var</span> Component = <span class="hljs-built_in">require</span>(<span class="hljs-string">'atril'</span>).Component;

Component({tagName: <span class="hljs-string">'todo-list'</span>})(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">VM</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.text = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.items = [
      {text: <span class="hljs-string">'Learn a new framework'</span>, completed: <span class="hljs-literal">true</span>},
      {text: <span class="hljs-string">'Be awesome'</span>}
    ];
    <span class="hljs-keyword">this</span>.newItem = {text: <span class="hljs-string">''</span>, completed: <span class="hljs-literal">false</span>}
  }

  VM.prototype.add = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.items.unshift(<span class="hljs-keyword">this</span>.newItem);
    <span class="hljs-keyword">this</span>.newItem = {text: <span class="hljs-string">''</span>, completed: <span class="hljs-literal">false</span>}
  };

  VM.prototype.remove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
    <span class="hljs-keyword">this</span>.items.splice(<span class="hljs-keyword">this</span>.items.indexOf(item), <span class="hljs-number">1</span>);
  };

  VM.viewUrl = <span class="hljs-string">'todo-list/todo-list.html'</span>;

  <span class="hljs-keyword">return</span> VM;
}());
</code></pre>
 </sf-collapse> 
<p>This will display nothing, because we don&#39;t have a custom <code>todo-item</code> element
yet. Let&#39;s create it.</p>
<p>Make <code>src/app/todo-item/</code> with the following:</p>
 <div class="code-pair"> 
<pre><code class="hljs lang-typescript"><span class="hljs-comment">// src/app/todo-item/todo-item.ts</span>

<span class="hljs-keyword">import</span> {Component, assign, bindable} from <span class="hljs-string">'atril'</span>;

@Component({
  tagName: <span class="hljs-string">'todo-item'</span>
})
<span class="hljs-keyword">class</span> VM {
  @assign element: HTMLElement;

  @bindable item = <span class="hljs-literal">null</span>;
  @bindable isNew = <span class="hljs-literal">false</span>;

  add() {
    <span class="hljs-keyword">this</span>.element.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">'add'</span>));
  }

  remove() {
    <span class="hljs-keyword">this</span>.element.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">'remove'</span>));
  }

  static viewUrl = <span class="hljs-string">'todo-item/todo-item.html'</span>;
}
</code></pre>
<pre><code class="hljs lang-html"><span class="hljs-comment">&lt;!-- src/app/<span class="hljs-doctag"><span class="hljs-keyword">todo</span></span>-item/<span class="hljs-doctag"><span class="hljs-keyword">todo</span></span>-item.html --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class.success</span>=<span class="hljs-value">"item.completed"</span> <span class="hljs-attribute">class.strikethrough</span>=<span class="hljs-value">"item.completed"</span>
     <span class="hljs-attribute">class.info</span>=<span class="hljs-value">"!item.completed"</span> <span class="hljs-attribute">class.orange</span>=<span class="hljs-value">"isNew"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">if.</span>=<span class="hljs-value">"!isNew"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">twoway.checked</span>=<span class="hljs-value">"item.completed"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">on.submit</span>=<span class="hljs-value">"add()"</span> <span class="hljs-attribute">onsubmit</span>=<span class="hljs-value">"return false"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">twoway.value</span>=<span class="hljs-value">"item.text"</span> <span class="hljs-attribute">bind.disabled</span>=<span class="hljs-value">"item.completed"</span> <span class="hljs-attribute">required</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">if.</span>=<span class="hljs-value">"isNew"</span> <span class="hljs-attribute">svg-icon.</span>=<span class="hljs-value">"plus"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">on.click</span>=<span class="hljs-value">"remove()"</span> <span class="hljs-attribute">if.</span>=<span class="hljs-value">"!isNew"</span> <span class="hljs-attribute">svg-icon.</span>=<span class="hljs-value">"times"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
 </div> 
 <sf-collapse class="info">
  <input id="quickstart-es5-todo-item" type="checkbox">
  <label for="quickstart-es5-todo-item" class="pad">
    <sf-icon svg-icon.="info-circle" class="inline text-info"></sf-icon>
    Click for ES5 version.
  </label> 
<pre><code class="hljs lang-javascript"><span class="hljs-keyword">var</span> Component = <span class="hljs-built_in">require</span>(<span class="hljs-string">'atril'</span>).Component;

Component({tagName: <span class="hljs-string">'todo-item'</span>})(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">VM</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.item = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.isNew = <span class="hljs-literal">false</span>;
  }

  VM.prototype.add = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.element.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">'add'</span>));
  };

  VM.prototype.remove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.element.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">'remove'</span>));
  };

  VM.assign = {element: <span class="hljs-string">'element'</span>};

  VM.bindable = [<span class="hljs-string">'item'</span>, <span class="hljs-string">'isNew'</span>];

  VM.viewUrl = <span class="hljs-string">'todo-item/todo-item.html'</span>;

  <span class="hljs-keyword">return</span> VM;
}());
</code></pre>
 </sf-collapse> 
<div>
  <sf-collapse class="info pad-ch">
    <input id="quickstart-views" type="checkbox">
    <label for="quickstart-views">
      <sf-icon svg-icon.="info-circle" class="inline text-info"></sf-icon>
      Note on views.
    </label>
    <div class="space-out-v">
      <p>
        This component specifies its view as <code>viewUrl</code>. The view can also be
        specified inline as the static class property <code>view</code> (great with
        <a href="https://github.com/systemjs/plugin-text">SystemJS/text</a>),
        or return a promise that resolves to a view.
      </p>
    </div>
  </sf-collapse>
</div>

<p>To activate these elements on the page, you need to:</p>
<ol>
<li>Import the components in your source.</li>
<li>Call <code>atril.bootstrap()</code>. This is done once for the entire application. You
can optionally pass a DOM element as an argument, and the library will
start search for <code>atril</code> features from that element, ignoring the rest.</li>
</ol>
<p>Your core <code>app.ts</code> file would look something like this:</p>
<pre><code class="hljs lang-typescript"><span class="hljs-keyword">import</span> {bootstrap} from <span class="hljs-string">'atril'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'todo-item/todo-item'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'todo-list/todo-list'</span>;
atril.bootstrap();
</code></pre>
<p>If the document isn&#39;t yet available, the library will defer bootstrapping
until it&#39;s loaded.</p>
<p>Now open the page and see the component in action: <a href="todo/">demo</a>.</p>
<h2><span>Data Flow</span><a class="heading-anchor" autolink.="data-flow"><sf-icon class="inline link"></sf-icon></a></h2>
<p>A few notes on the data flow. Components generally interoperate in three ways.</p>
<ol>
<li>One-way binding from parent to child. Can use arbitrary expressions.</li>
</ol>
<pre><code class="hljs lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">inner-child</span> <span class="hljs-attribute">bind.child-property</span>=<span class="hljs-value">"parentProperty || somethingElse"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">inner-child</span>&gt;</span>
</code></pre>
<ol>
<li>Two-way binding between parent and child.</li>
</ol>
<pre><code class="hljs lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">inner-child</span> <span class="hljs-attribute">twoway.child-property</span>=<span class="hljs-value">"parentProperty"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">inner-child</span>&gt;</span>
</code></pre>
<ol>
<li>Event-based feedback from child to parent.</li>
</ol>
<pre><code class="hljs lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">inner-child</span> <span class="hljs-attribute">on.child-event</span>=<span class="hljs-value">"parentMethod($event.detail)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">inner-child</span>&gt;</span>
</code></pre>
<p>The todo example uses all three. It&#39;s generally best to bind custom components
one-way and feed the data back through events. For form inputs, two-way
databinding is a good fit.</p>
<p>Another thing to note is that <code>bind</code> and <code>twoway</code> pull double duty. They bind to
properties on the target DOM element, and if it happens to be a custom element
with a viewmodel, also try to bind to that viewmodel&#39;s properties.</p>
<p>To avoid surprises, the child component has to declare which properties are
bindable. The <code>list-item</code> example shows how to do this with the <code>@bindable</code>
decorator or in plain ES5.</p>
<hr>
<p>That&#39;s it! In a few lines, you have an interactive, data driven micro
application built out of reusable elements (<a href="todo/">demo</a>). Check the site&#39;s
source for more examples. If you have any questions, hop into the
<a href="https://gitter.im/Mitranim/atril" target="_blank">Gitter</a> channel!</p>

      </div>

      <div mark-href.active class="doc-sidenav flex-1" style="min-width: 8em">
        <a href>Overview</a>
<a href="quickstart/">Quickstart</a>
<a href="component/">Component</a>
<a href="attribute/">Attribute</a>
<a href="mold/">Mold</a>
<a href="databinding/">Databinding</a>
<a href="bootstrapping/">Bootstrapping</a>
<a href="if/"><code>if</code></a>
<a href="for/"><code>for</code></a>
<a href="let/"><code>let</code></a>
<a href="on/"><code>on</code></a>
<a href="class/"><code>class</code></a>
<a href="ref/"><code>ref</code></a>
<a href="todo/">demo</a>
<!-- TODO section on component interoperation -->
<!-- TODO separate section on dependency assignment -->
<a href="https://gitter.im/Mitranim/atril?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge" target="_blank">
  <img src="https://badges.gitter.im/Join%20Chat.svg">
</a>

      </div>
    </div>

    <sf-footer>
  <sf-footer-body>
    <div class="flex-1 flex flex-column items-start">
      <span>
        2015
        <a href="http://mitranim.com" target="_blank">Mitranim</a>
        (<a href="https://github.com/Mitranim/atril/blob/master/LICENSE" target="_blank">MIT licensed</a>)
      </span>
    </div>
    <div class="flex-1 flex flex-column items-center">
      <a class="flex items-center" href="https://github.com/Mitranim/atril" target="_blank">
        <sf-icon class="github-blue" style="font-size: 2em"></sf-icon>
        Source at GitHub
      </a>
    </div>
    <div class="flex-1 flex flex-column items-end">
      <sf-icon class="arrow-up pointer fade" onclick="scrollTo(0, 0)"></sf-icon>
    </div>
  </sf-footer-body>
</sf-footer>
  </body>

  <noscript>
    <doc-noscript>
  <doc-noscript-content class="narrow-inverse">
    <h2>Hello! :)</h2>
    <p>This site is a live demo for <a href="https://github.com/Mitranim/atril" target="_blank"><code>atril</code></a>, a JS rendering library. For demo purposes, it's mostly rendered with JavaScript.</p>
    <p>Please enable JavaScript in your browser. Thank you!</p>
  </doc-noscript-content>
</doc-noscript>

  </noscript>
</html>
